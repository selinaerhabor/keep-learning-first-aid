{% extends 'base.html' %}
{% block page_title %}Cart | KLFA{% endblock %}
{% load static %}
{% block document %}

  <header>
    <nav class="nav-pages">
      <ul class="nav justify-content-center">
        <li class="nav-item">
          <a class="nav-link nav-tab" href="{% url 'home' %}">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-tab" href="{% url 'firstaidtipsoftheweek' %}">First Aid Tip of the Week</a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-tab" href="{% url 'learningforkids' %}">Learning for Kids</a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-tab" href="{% url 'learningforadults' %}">Learning for Adults</a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-tab" href="{% url 'faqs' %}">FAQs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-tab" href="{% url 'sale' %}">Products</a>
        </li>
      </ul>
    </nav>
    </header>
    
  <div class="container-fluid bg">
    <div class="row">
      <h1 class="mx-auto margin">Your Cart</h1>
    </div>
    <hr>
    <div class="row">
        {% for item in cart_items %}
        <div class="col-xs-12 col-sm-6 col-md-4">
          <div class="card text-center margin-bottom">
            <div class="panel-body">
              <h3 class="text-truncate">{{ item.product.name }}</h3>
              <a href="">
                <div class="product" style="background-image: url('{{ MEDIA_URL }}{{ item.product.image }}')" height="200"></div>
              </a>
              <div class="caption">
                <ul>
                  <p>{{ item.product.category }}</p>
                </ul>
                <p>£{{ item.product.price }}</p>
                  <form class="form-inline justify-content-center" method="post" action="{% url 'adjust_cart' item.id %}">
                    {% csrf_token %}
                    <div class="form-group">
                      <label for="inputAmount" class="sr-only">New Qty</label>
                      <div class="input-group">
                        <div class="input-group-addon">Qty:</div>
                          <input name="quantity" type="number" class="form-control" min="0" max="999" value="{{item.quantity}}" placeholder="Qty" aria-label="Recipient's username" aria-describedby="basic-addon2">
                          <div class="input-group-append">
                            <button type="submit" class="btn btn-primary">Amend</button>
                          </div>
                        </div>
                    </div>
                    <div class="form-group margin">
                      <a href="" class="btn btn-danger remove_from_cart">Remove This Item</a>
                    </div>
                  </form>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    <div class="row">
      <div class="col-12">
        <div class="float-right">
        <a href="" class="btn btn-light" role="button">Empty Your Cart</a>
        </div>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-12">
        <div class="float-left">
          <h6>Total</h6>
          <h4>£{{ total }}</h4>
          </div>
        <div class="float-right"> 
          <a href="{% url 'checkout' %}" class="btn btn-success shop-now" role="button">Continue to checkout</a>
        </div>
      </div>
    </div>
  </div>

{% endblock %}